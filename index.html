<!DOCTYPE html>
<html lang="th" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NEO ‚Ä¢ Toolkit</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Kanit', 'system-ui', 'sans-serif'], mono: ['Source Code Pro','monospace'] },
          colors: {
            base: { 50:'#f6f7fb', 900:'#0b0f17' },
            brand: { 50:'#ecfeff', 300:'#67e8f9', 500:'#06b6d4', 600:'#0891b2', 700:'#0e7490' },
            acid:  { 400:'#a3e635', 500:'#84cc16' }
          },
          boxShadow: {
            ring: '0 0 0 1px rgba(6,182,212,.6), 0 10px 30px rgba(6,182,212,.15)',
            glow: '0 0 25px rgba(6,182,212,.35)'
          },
          backdropBlur: { xs: '2px' }
        }
      },
      darkMode: 'class'
    }
  </script>
  <style>
    :root { --radius: 14px }
    html,body { height: 100% }
    body {
      background:
        radial-gradient(1200px 600px at 120% -10%, rgba(6,182,212,.25), transparent 60%),
        radial-gradient(900px 600px at -10% 120%, rgba(132,204,22,.18), transparent 60%),
        linear-gradient(180deg, #0b1220 0%, #0b0f17 55%, #0b0f17 100%);
      color: #dbeafe;
    }
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(6px);
      border-radius: var(--radius);
    }
    .tilt { transform: perspective(1000px) rotateX(0.8deg) rotateY(-1deg) }
    .ring-focus:focus { box-shadow: 0 0 0 3px rgba(6,182,212,.55) }
    .scroll-snap-x { scroll-snap-type: x mandatory }
    .snap-center { scroll-snap-align: center }
    .no-tap-highlight { -webkit-tap-highlight-color: transparent }
    .gradient-text { background: linear-gradient(90deg, #67e8f9, #a3e635); -webkit-background-clip: text; background-clip: text; color: transparent }
    .card { border: 1px solid rgba(255,255,255,.08); border-radius: var(--radius); background: rgba(20,25,35,.65); }
    .btn { border-radius: 12px; font-weight: 700; padding: .8rem 1rem }
    .btn-primary { background: linear-gradient(90deg,#06b6d4,#0ea5e9); color: white }
    .btn-primary:hover { filter: brightness(1.08) }
    .btn-ghost { background: rgba(255,255,255,.06); color: #e2e8f0; border: 1px solid rgba(255,255,255,.08) }
    .btn-ghost:hover { background: rgba(255,255,255,.12) }
    .kbd { border:1px solid rgba(255,255,255,.18); padding:.1rem .4rem; border-radius:.5rem; background: rgba(255,255,255,.08) }
    .mono { font-family: 'Source Code Pro', monospace }
    .fade-in { animation: fade .35s ease-out }
    @keyframes fade { from { opacity: 0; transform: translateY(4px) } to { opacity:1; transform:none } }
  </style>
</head>
<body class="text-slate-200 selection:bg-cyan-600/40 selection:text-cyan-50">
  <!-- Top Bar -->
  <header class="sticky top-0 z-40">
    <div class="glass mx-auto max-w-6xl mt-4 mb-2 px-4 sm:px-6 py-3 flex items-center justify-between gap-3 tilt">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-brand-500 to-acid-500 shadow-glow grid place-items-center font-black text-base">N</div>
        <div>
          <div class="text-base sm:text-lg font-bold leading-none">NEO Toolkit</div>
          <div class="text-[11px] uppercase tracking-widest text-slate-400">Address Forge & Live Board</div>
        </div>
      </div>
      <nav class="hidden sm:flex gap-1">
        <button data-tab="gen" class="tab-btn btn btn-ghost">Generator</button>
        <button data-tab="board" class="tab-btn btn btn-ghost">Board</button>
        <button data-tab="settings" class="tab-btn btn btn-ghost">Settings</button>
      </nav>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="btn btn-ghost ring-focus" aria-label="Toggle theme" title="‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏™‡∏á/‡∏°‡∏∑‡∏î">
          <span id="themeIcon">üåô</span>
        </button>
      </div>
    </div>
    <div class="mx-auto max-w-6xl px-4 sm:px-6">
      <div class="rounded-xl px-3 py-2 text-xs sm:text-sm border border-brand-600/30 bg-brand-600/10 text-brand-50">
        <b>Tip:</b> ‡∏Å‡∏î <span class="kbd">G</span> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà, <span class="kbd">C</span> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="mx-auto max-w-6xl px-4 sm:px-6 pt-6 pb-24 space-y-8">
    <!-- Tab: Generator -->
    <section id="tab-gen" class="space-y-6 fade-in">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
        <!-- Left controls -->
        <aside class="lg:col-span-2 space-y-6">
          <div class="card p-5 space-y-4">
            <h2 class="text-xl font-bold gradient-text">üîê ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏±‡∏ö</h2>
            <div class="grid grid-cols-2 gap-3">
              <label class="text-sm">
                <span class="block text-slate-400 mb-1">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</span>
                <select id="addressSelect" class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus">
                  <option value="home">‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢‡∏™‡∏°‡∏∏‡∏ó‡∏£</option>
                  <option value="alt1">‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡∏ó‡∏∏‡∏°</option>
                </select>
              </label>
              <label class="text-sm">
                <span class="block text-slate-400 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏£‡∏≤‡∏á</span>
                <select id="obfuscationSelect" class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus">
                  <option value="low">‡∏ï‡πà‡∏≥ ‚Äî ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</option>
                  <option value="medium" selected>‡∏Å‡∏•‡∏≤‡∏á ‚Äî ‡∏™‡∏°‡∏î‡∏∏‡∏•</option>
                  <option value="high">‡∏™‡∏π‡∏á ‚Äî ‡∏û‡∏£‡∏≤‡∏á‡∏´‡∏ô‡∏±‡∏Å</option>
                  <option value="extreme">‡∏™‡∏∏‡∏î‡∏Ç‡∏±‡πâ‡∏ô ‚Äî ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å</option>
                </select>
              </label>
              <label class="text-sm">
                <span class="block text-slate-400 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</span>
                <select id="linesSelect" class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus">
                  <option value="auto" selected>‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</option>
                  <option value="1">1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</option>
                  <option value="2">2 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</option>
                  <option value="3">3 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</option>
                  <option value="4">4 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</option>
                  <option value="5">5 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</option>
                </select>
              </label>
              <label class="text-sm">
                <span class="block text-slate-400 mb-1">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç</span>
                <select id="digitMode" class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus">
                  <option value="mixed" selected>‡∏ú‡∏™‡∏° (‡πÑ‡∏ó‡∏¢/‡∏≠‡∏≤‡∏£‡∏ö‡∏¥‡∏Å)</option>
                  <option value="thai">‡πÄ‡∏•‡∏Ç‡πÑ‡∏ó‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                  <option value="arabic">‡πÄ‡∏•‡∏Ç‡∏≠‡∏≤‡∏£‡∏ö‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                </select>
              </label>
            </div>
            <div class="flex flex-wrap gap-3 pt-2">
              <button id="generateBtn" class="btn btn-primary shadow-ring">üé≤ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</button>
              <button id="copyBtn" class="btn btn-ghost">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
              <button id="clearBtn" class="btn btn-ghost">üßπ ‡∏•‡πâ‡∏≤‡∏á</button>
              <button id="exportBtn" class="btn btn-ghost">‚¨áÔ∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
            </div>
          </div>

          <div class="grid grid-cols-3 gap-3">
            <div class="card p-4 text-center">
              <div id="generateCount" class="text-2xl font-extrabold text-brand-300">0</div>
              <div class="text-[11px] text-slate-400 mt-1">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</div>
            </div>
            <div class="card p-4 text-center">
              <div id="copyCount" class="text-2xl font-extrabold text-acid-400">0</div>
              <div class="text-[11px] text-slate-400 mt-1">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</div>
            </div>
            <div class="card p-4 text-center">
              <div id="currentVariation" class="text-2xl font-extrabold">A1</div>
              <div class="text-[11px] text-slate-400 mt-1">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
            </div>
          </div>

          <div class="card p-4">
            <h3 class="font-semibold mb-2">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
            <div id="historyContainer" class="max-h-56 overflow-auto space-y-2">
              <p class="text-sm text-slate-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p>
            </div>
          </div>
        </aside>

        <!-- Right preview -->
        <section class="lg:col-span-3 space-y-4">
          <div class="card p-5 h-[300px] overflow-auto" aria-live="polite">
            <div class="flex items-center justify-between gap-3 mb-2">
              <h3 class="font-semibold text-slate-300">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h3>
              <div class="text-xs text-slate-400" id="generationTime"></div>
            </div>
            <pre id="resultDisplay" class="mono whitespace-pre-wrap text-cyan-100 min-h-[220px]"></pre>
          </div>

          <div class="card p-5">
            <h4 class="font-semibold mb-2">üß™ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Label ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ</h4>
            <p class="text-slate-400 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Label ‡∏õ‡∏Å‡∏ï‡∏¥/‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤)</p>
            <div id="labelPreview" class="mt-3 grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs"></div>
          </div>

          <div id="statusMessage" class="text-center text-sm text-slate-400"></div>
        </section>
      </div>
    </section>

    <!-- Tab: Board -->
    <section id="tab-board" class="space-y-6 hidden">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-1 card p-5 space-y-4">
          <h2 class="text-xl font-bold gradient-text">üí¨ ‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</h2>
          <form id="message-form" class="space-y-3">
            <label class="text-sm block">
              <span class="block text-slate-400 mb-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</span>
              <input id="title-input" type="text" maxlength="120"
                     class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus"
                     placeholder="‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠...">
            </label>
            <label class="text-sm block">
              <span class="block text-slate-400 mb-1">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span>
              <textarea id="message-input" rows="4" maxlength="1000"
                        class="w-full bg-transparent border border-slate-600/60 rounded-lg px-3 py-2 ring-focus"
                        placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
            </label>
            <div class="flex items-center justify-between text-xs text-slate-400">
              <span><span id="charLeft">1000</span> ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span>
              <span class="opacity-70">ID ‡∏ö‡∏≠‡∏£‡πå‡∏î: <b id="board-id-display" class="font-mono"></b></span>
            </div>
            <div class="flex gap-3 pt-1">
              <button type="submit" id="post-button" class="btn btn-primary w-full">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
              <button type="button" id="clear-compose" class="btn btn-ghost">‡∏•‡πâ‡∏≤‡∏á</button>
            </div>
          </form>
          <div class="text-xs text-slate-500">
            * ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å authorId)
          </div>
        </div>

        <div class="lg:col-span-2 space-y-4">
          <div class="card p-4">
            <div id="loading-state" class="text-center text-slate-400 py-8">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...</div>
            <div id="messages-container" class="space-y-3"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tab: Settings -->
    <section id="tab-settings" class="space-y-6 hidden">
      <div class="card p-5 space-y-4">
        <h2 class="text-xl font-bold gradient-text">‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
        <div class="grid sm:grid-cols-2 gap-4">
          <label class="text-sm block">
            <span class="block text-slate-400 mb-1">‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡∏´‡∏•‡∏±‡∏Å</span>
            <input id="accentPicker" type="color" value="#06b6d4" class="w-24 h-10 rounded ring-focus border-0">
          </label>
          <div class="text-sm">
            <div class="text-slate-400 mb-1">‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</div>
            <button id="purgeLocal" class="btn btn-ghost">üóëÔ∏è ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (localStorage)</button>
          </div>
        </div>
        <div class="text-xs text-slate-400">
          ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô NEO 1.0 ‚Ä¢ UI ‡∏£‡∏µ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå, Toggle ‡∏ò‡∏µ‡∏°, ‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î G/C
        </div>
      </div>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-5 right-5 px-4 py-2 rounded-lg bg-brand-600 text-white opacity-0 pointer-events-none transition-all">‚Äî</div>

  <!-- Scripts -->
  <script type="module">
    // ===== Theme =====
    const html = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const savedTheme = localStorage.getItem('neo_theme');
    if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    }
    function updateThemeIcon() {
      themeIcon.textContent = html.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
    }
    updateThemeIcon();
    themeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      localStorage.setItem('neo_theme', html.classList.contains('dark') ? 'dark' : 'light');
      updateThemeIcon();
      showToast('‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡πÅ‡∏•‡πâ‡∏ß');
    });

    // ===== Simple tabs =====
    const tabs = {
      gen: document.getElementById('tab-gen'),
      board: document.getElementById('tab-board'),
      settings: document.getElementById('tab-settings'),
    };
    const tabBtns = document.querySelectorAll('.tab-btn');
    function switchTab(which) {
      Object.entries(tabs).forEach(([k,el]) => el.classList.toggle('hidden', k !== which));
      tabBtns.forEach(btn => btn.classList.toggle('btn-primary', btn.dataset.tab === which));
      localStorage.setItem('neo_tab', which);
    }
    tabBtns.forEach(b => b.addEventListener('click', () => switchTab(b.dataset.tab)));
    switchTab(localStorage.getItem('neo_tab') || 'gen');

    // ===== Toast =====
    const toast = document.getElementById('toast');
    let toastTimer;
    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.remove('opacity-0');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.add('opacity-0'), 1800);
    }

    // ===== Address Generator =====
    const ADDRESSES = {
      home: { houseNumber: "62/37", soi: "‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á16", village: "‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢‡∏™‡∏°‡∏∏‡∏ó‡∏£2", road: "‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á", subdistrict: "‡∏£‡∏≤‡∏ä‡∏≤‡πÄ‡∏ó‡∏ß‡∏∞", district: "‡∏ö‡∏≤‡∏á‡∏û‡∏•‡∏µ", province: "‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£", postalCode: "10540" },
      alt1: { houseNumber: "22/4", soi: "‡πÉ‡∏à‡πÄ‡∏≠‡∏∑‡πâ‡∏≠ 2", village: "", road: "", subdistrict: "‡∏ö‡∏≤‡∏á‡∏Ç‡∏∞‡πÅ‡∏¢‡∏á", district: "", province: "‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ", postalCode: "12000" }
    };
    const PHONES = { home: "0961408164", alt1: "0946401569" };

    const Labels = {
      house: ['‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà', '‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà', 'No.', '#', ''],
      phone: ['‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', 'Tel', '‡πÇ‡∏ó‡∏£', '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£', ''],
      soi: ['‡∏ã‡∏≠‡∏¢', '‡∏ã.', 'Soi', ''],
      village: ['‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô', '‡∏°.', '‡∏´‡∏°‡∏π‡πà', ''],
      road: ['‡∏ñ‡∏ô‡∏ô', '‡∏ñ.', 'Rd.', ''],
      subdistrict: ['‡∏ï‡∏≥‡∏ö‡∏•', '‡∏ï.', ''],
      district: ['‡∏≠‡∏≥‡πÄ‡∏†‡∏≠', '‡∏≠.', ''],
      province: ['‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î', '‡∏à.', ''],
      postal: ['‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå', '‡∏£‡∏´‡∏±‡∏™', 'Zip', '']
    };
    const FuzzyLabels = {
      house: ['‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡πÖ‡∏ó‡∏µ‡πà', '‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏ã‡∏ó‡∏µ‡πà', '‡∏ö‡πâ‡∏≤‡∏ô‡πÄx‡∏Ç‡∏ó‡∏µ‡πà', '‡∏ö‡πâ‡∏≤u‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà'],
      phone: ['‡πÇ‡∏ós‡∏±‡∏û‡∏ó‡πå', '‡πÇ‡∏ó‡∏£s‡∏±s‡∏ó‡πå', '‡πÇ‡∏óp‡∏®‡∏±‡∏û', '‡πÇ‡∏ó‡∏£s‡∏±‡∏ö'],
      soi: ['‡∏ão‡∏¢', '‡∏ãx‡∏¢', '‡∏ã0‡∏¢'],
      village: ['‡∏´‡∏°‡∏π‡πà‡∏ö‡∏≤u', '‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤u', '‡∏´‡∏°‡∏πv‡∏ö‡∏≤u'],
      road: ['‡∏ñu‡∏ô', '‡∏ñuv', '‡∏ñv‡∏ô'],
      subdistrict: ['‡∏ï‡∏≥‡∏öu', '‡∏ï‡πç‡∏≤‡∏ö‡∏•', '‡∏ïx‡∏ö‡∏•'],
      district: ['‡∏≠‡∏≥p‡∏≠', '‡∏≠‡∏≥‡πÄ‡πÖ‡∏≠', '‡∏≠‡πç‡∏≤‡πÄ‡∏†o'],
      province: ['‡∏à‡∏±‡∏á‡∏´‡∏ß‡πâ‡∏î', '‡∏à‡∏±n‡∏´‡∏ß‡∏±‡∏î', '‡∏à‡∏±J‡∏´‡∏ß‡∏±‡∏î'],
      postal: ['‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õs‡∏©‡∏ì‡∏µ‡∏¢‡πå', '‡∏£‡∏´‡∏±n‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå', '‡∏£‡∏´‡∏±‡∏™‡πÑp‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå']
    };
    const Separators = [', ', ' ', ' ‚Ä¢ ', ' ‚Äî '];
    const Punct = ['.', ',', '/', '-', '_'];

    const addressSelect = document.getElementById('addressSelect');
    const obfuscationSelect = document.getElementById('obfuscationSelect');
    const linesSelect = document.getElementById('linesSelect');
    const digitMode = document.getElementById('digitMode');
    const resultDisplay = document.getElementById('resultDisplay');
    const generationTime = document.getElementById('generationTime');
    const labelPreview = document.getElementById('labelPreview');
    const statusMessage = document.getElementById('statusMessage');

    const stats = { generateCount: 0, copyCount: 0 };
    const history = [];
    const generateCountEl = document.getElementById('generateCount');
    const copyCountEl = document.getElementById('copyCount');
    const currentVariationEl = document.getElementById('currentVariation');
    const historyContainer = document.getElementById('historyContainer');

    function rnd(array) { return array[Math.floor(Math.random()*array.length)] }
    function toThaiDigits(str) { return str.replace(/[0-9]/g, d => '‡πê‡πë‡πí‡πì‡πî‡πï‡πñ‡πó‡πò‡πô'[d]) }
    function toArabicDigits(str) { return str.replace(/[‡πê-‡πô]/g, d => '0123456789'['‡πê‡πë‡πí‡πì‡πî‡πï‡πñ‡πó‡πò‡πô'.indexOf(d)]) }
    function zws(s) { return s.split('').join('\\u200b') }
    function injectPunc(str, level) {
      const chance = { low: 0, medium: 0.05, high: 0.15, extreme: 0.3 }[level];
      if (!chance) return str;
      let out='';
      for (const ch of str) {
        out += ch;
        if (Math.random() < chance && ch !== ' ' && !Punct.includes(ch)) out += rnd(Punct);
      }
      return out;
    }
    function formatNumber(num) {
      if (!num) return '';
      const f = [num, num.replace('/', ' / '), num.replace('/', '-'), \`No.\${num}\`, num.split('').join(' ')];
      return rnd(f);
    }
    function formatPhone(phone) {
      if (!phone) return '';
      const f = [
        phone,
        phone.replace(/(\\d{3})(\\d{3})(\\d{4})/, '$1-$2-$3'),
        phone.replace(/(\\d{3})(\\d{3})(\\d{4})/, '$1 $2 $3'),
        '+66 ' + phone.slice(1)
      ];
      return rnd(f);
    }
    function variationCode() {
      const A='ABCDEFGHIJKLMNOPQRSTUVWXYZ', D='0123456789';
      return A[Math.floor(Math.random()*A.length)] + D[Math.floor(Math.random()*D.length)];
    }

    function applyDigitMode(s) {
      if (digitMode.value === 'thai') return toThaiDigits(String(s));
      if (digitMode.value === 'arabic') return toArabicDigits(String(s));
      // mixed
      return Math.random() < 0.5 ? toThaiDigits(String(s)) : String(s);
    }

    function renderLabelPreview() {
      const parts = ['house','phone','soi','village','road','subdistrict','district','province','postal'];
      labelPreview.innerHTML = parts.map(k => {
        const normal = rnd(Labels[k]);
        const fuzzy = FuzzyLabels[k] ? rnd(FuzzyLabels[k]) : '';
        return \`<div class="glass px-2 py-1 rounded text-slate-300 flex justify-between"><span>\${normal || '‚Äî'}</span><span class="text-slate-500">\${fuzzy || ''}</span></div>\`
      }).join('');
    }

    function generateAddress() {
      const start = performance.now();
      const level = obfuscationSelect.value;
      const addr = ADDRESSES[addressSelect.value];
      const phone = PHONES[addressSelect.value];
      const postal = applyDigitMode(addr.postalCode);

      const comps = [
        { key: 'house', value: \`<mark class="rounded bg-yellow-300/80 text-slate-900 px-1 font-bold">\${formatNumber(applyDigitMode(addr.houseNumber))}</mark>\`, label: Labels.house, required: !!addr.houseNumber },
        { key: 'phone', value: applyDigitMode(formatPhone(phone)), label: Labels.phone, required: !!phone },
        { key: 'soi', value: addr.soi, label: Labels.soi },
        { key: 'village', value: addr.village, label: Labels.village },
        { key: 'road', value: addr.road, label: Labels.road },
        { key: 'subdistrict', value: addr.subdistrict, label: Labels.subdistrict },
        { key: 'district', value: addr.district, label: Labels.district },
        { key: 'province', value: addr.province, label: Labels.province },
        { key: 'postal', value: postal, label: Labels.postal },
      ].filter(c => c.value && String(c.value).replace(/<[^>]*>/g,'').trim() !== '');

      const required = comps.filter(c=>c.required);
      const optional = comps.filter(c=>!c.required);
      const useN = Math.max(2, Math.min(optional.length, Math.floor(Math.random()*(optional.length-1))+2));
      const selected = [...required, ...optional.sort(()=>0.5-Math.random()).slice(0,useN)].sort(()=>0.5-Math.random());

      const parts = selected.map(comp => {
        let label = rnd(comp.label);
        if (Math.random() < 0.4 && FuzzyLabels[comp.key]?.length) label = rnd(FuzzyLabels[comp.key]);
        const showLabel = label && (comp.required || Math.random() > 0.3);
        const value = comp.key === 'house' ? comp.value : injectPunc(comp.value, level);
        let part = showLabel ? \`\${label} \${value}\` : value;

        // Zero width space obfuscation excluding <mark>
        if (comp.key !== 'house') {
          if (level === 'extreme' && Math.random() < 0.5) return zws(part);
          if (level === 'high' && Math.random() < 0.3) return zws(part);
        }
        return part.trim();
      }).filter(Boolean);

      let linesOpt = linesSelect.value;
      let numLines = linesOpt === 'auto' ? Math.floor(Math.random()*4)+1 : parseInt(linesOpt,10);
      if (numLines > parts.length) numLines = parts.length;
      let finalText;
      if (numLines <= 1) {
        finalText = parts.join(rnd(Separators));
      } else {
        const lines = Array.from({length: numLines}, () => []);
        parts.forEach((p,i) => lines[i%numLines].push(p));
        finalText = lines.map(line => line.join(' ')).join('\\n');
      }

      // Stats + UI
      stats.generateCount++;
      generateCountEl.textContent = stats.generateCount;
      const v = variationCode();
      currentVariationEl.textContent = v;
      resultDisplay.innerHTML = finalText.replace(/\\n/g,'<br>');
      generationTime.textContent = \`Generated in \${Math.max(1, Math.round(performance.now()-start))}ms\`;
      addHistory(finalText, v);
      status('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß üé≤');
    }

    function status(msg, type='info') {
      statusMessage.textContent = msg;
      statusMessage.className = \`text-center text-sm \${type==='error'?'text-red-400':'text-slate-400'}\`;
      setTimeout(()=>{ if (statusMessage.textContent===msg) statusMessage.textContent=''; }, 2500);
    }

    function addHistory(content, variation) {
      history.unshift({ id: Date.now(), variation, content, at: new Date().toLocaleTimeString('th-TH') });
      if (history.length > 6) history.pop();
      renderHistory();
    }

    function renderHistory() {
      if (!history.length) { historyContainer.innerHTML = '<p class="text-sm text-slate-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p>'; return; }
      historyContainer.innerHTML = history.map(h => \`
        <button class="w-full text-left glass px-3 py-2 rounded hover:shadow-ring transition flex items-center justify-between gap-3"
          data-hist="\${h.id}">
          <span class="text-xs text-brand-300 font-bold">#\${h.variation}</span>
          <span class="truncate mono text-[12px] flex-1 mx-2 text-slate-300">\${h.content.replace(/\\n/g,'  ')}</span>
          <span class="text-[11px] text-slate-500">\${h.at}</span>
        </button>\`
      ).join('');
      historyContainer.querySelectorAll('button[data-hist]').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = +btn.dataset.hist;
          const item = history.find(x=>x.id===id);
          if (item) {
            resultDisplay.innerHTML = item.content.replace(/\\n/g,'<br>');
            showToast(\`‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ #\${item.variation}\`);
          }
        });
      });
    }

    function copyResult() {
      const text = resultDisplay.textContent || '';
      if (!text.trim()) return status('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å','error');
      navigator.clipboard.writeText(text).then(()=>{
        stats.copyCount++;
        copyCountEl.textContent = stats.copyCount;
        showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ');
      }).catch(()=> status('‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß','error'));
    }

    function clearAll() {
      stats.generateCount = 0; stats.copyCount = 0;
      document.getElementById('generateCount').textContent = '0';
      document.getElementById('copyCount').textContent = '0';
      currentVariationEl.textContent = '‚Äî';
      generationTime.textContent = '';
      resultDisplay.textContent = '';
      history.length = 0; renderHistory();
      status('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß üßπ');
    }

    function exportResult() {
      const text = resultDisplay.textContent || '';
      if (!text.trim()) return status('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å','error');
      const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = \`address-\${Date.now()}.txt\`;
      a.click();
      URL.revokeObjectURL(a.href);
      showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß ‚¨áÔ∏è');
    }

    // Persist controls
    function persistControls() {
      const key='neo_controls';
      const data={
        addressSelect: addressSelect.value,
        obfuscationSelect: obfuscationSelect.value,
        linesSelect: linesSelect.value,
        digitMode: digitMode.value
      };
      localStorage.setItem(key, JSON.stringify(data));
    }
    function restoreControls() {
      try {
        const data = JSON.parse(localStorage.getItem('neo_controls')||'{}');
        if (data.addressSelect) addressSelect.value = data.addressSelect;
        if (data.obfuscationSelect) obfuscationSelect.value = data.obfuscationSelect;
        if (data.linesSelect) linesSelect.value = data.linesSelect;
        if (data.digitMode) digitMode.value = data.digitMode;
      } catch {}
    }

    // Bindings
    document.getElementById('generateBtn').addEventListener('click', generateAddress);
    document.getElementById('copyBtn').addEventListener('click', copyResult);
    document.getElementById('clearBtn').addEventListener('click', clearAll);
    document.getElementById('exportBtn').addEventListener('click', exportResult);
    [addressSelect, obfuscationSelect, linesSelect, digitMode].forEach(el => el.addEventListener('change', () => { persistControls(); renderLabelPreview(); }));

    document.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
      if (e.key.toLowerCase() === 'g') generateAddress();
      if (e.key.toLowerCase() === 'c') copyResult();
    });

    restoreControls();
    renderLabelPreview();
    generateAddress();

    // ===== Message Board (Firebase) =====
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, query, onSnapshot, serverTimestamp, orderBy, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAbD0PkshU9iNghvi-FCsV74PeR4aWzyQo",
      authDomain: "sent-9c549.firebaseapp.com",
      projectId: "sent-9c549",
      storageBucket: "sent-9c549.firebasestorage.app",
      messagingSenderId: "436570838998",
      appId: "1:436570838998:web:ec79c0496464ceabe33677"
    };
    const SHARED_BOARD_ID = 'my-shared-board-123';
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    let currentUserId = null;
    const boardIdDisplay = document.getElementById('board-id-display');
    boardIdDisplay.textContent = SHARED_BOARD_ID;

    const messageForm = document.getElementById('message-form');
    const titleInput = document.getElementById('title-input');
    const messageInput = document.getElementById('message-input');
    const messagesContainer = document.getElementById('messages-container');
    const loadingState = document.getElementById('loading-state');
    const charLeft = document.getElementById('charLeft');
    const clearCompose = document.getElementById('clear-compose');

    messageInput.addEventListener('input', () => {
      charLeft.textContent = String(1000 - messageInput.value.length);
    });

    clearCompose.addEventListener('click', () => {
      titleInput.value = '';
      messageInput.value = '';
      charLeft.textContent = '1000';
    });

    function createMessageElement(msg) {
      const isMine = msg.authorId && msg.authorId === currentUserId;
      const div = document.createElement('div');
      div.className = 'card p-4 fade-in';

      const title = msg.title?.trim() ? \`<div class="font-semibold text-brand-300">\${escapeHTML(msg.title)}</div>\` : '';
      const dateStr = msg.timestamp ? new Date(msg.timestamp.toDate()).toLocaleString('th-TH') : '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';
      div.innerHTML = \`
        <div class="flex items-start justify-between gap-4">
          <div class="flex-1">
            \${title}
            <p class="text-slate-200 mt-1 whitespace-pre-wrap">\${escapeHTML(msg.text)}</p>
            <div class="text-[11px] text-slate-500 mt-2">\${dateStr}</div>
          </div>
          <div class="flex flex-col gap-2 items-end">
            <button class="copy-btn btn btn-ghost px-3 py-1 text-xs">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
            \${isMine ? '<button class="del-btn btn btn-ghost px-3 py-1 text-xs text-red-300 border-red-400/30">‡∏•‡∏ö</button>' : ''}
          </div>
        </div>
      \`;

      div.querySelector('.copy-btn').onclick = () => {
        navigator.clipboard.writeText(msg.text || '').then(()=> showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß'));
      };
      if (isMine) {
        div.querySelector('.del-btn').onclick = async () => {
          const ok = confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');
          if (!ok) return;
          try {
            await deleteDoc(doc(db, \`/artifacts/\${SHARED_BOARD_ID}/public/data/messages/\${msg.id}\`));
          } catch (e) {
            console.error(e);
            showToast('‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
          }
        };
      }
      return div;
    }

    function escapeHTML(str='') {
      const p = document.createElement('p');
      p.textContent = str;
      return p.innerHTML;
    }

    async function postMessage(text, title) {
      if (!text.trim()) return;
      try {
        await addDoc(collection(db, \`/artifacts/\${SHARED_BOARD_ID}/public/data/messages\`), {
          text: text.trim().slice(0,1000),
          title: (title||'').trim().slice(0,120),
          timestamp: serverTimestamp(),
          authorId: currentUserId
        });
        titleInput.value = '';
        messageInput.value = '';
        charLeft.textContent = '1000';
      } catch (error) {
        console.error('post error', error);
        showToast('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á');
      }
    }

    function listenForMessages() {
      const q = query(collection(db, \`/artifacts/\${SHARED_BOARD_ID}/public/data/messages\`), orderBy('timestamp','desc'));
      return onSnapshot(q, (snap) => {
        loadingState.style.display = 'none';
        const msgs = [];
        snap.forEach(d => msgs.push({ id: d.id, ...d.data() }));
        messagesContainer.innerHTML = '';
        if (!msgs.length) {
          messagesContainer.innerHTML = '<p class="text-center text-slate-400 py-10">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</p>';
        } else {
          msgs.forEach(m => messagesContainer.appendChild(createMessageElement(m)));
        }
      }, (err) => {
        console.error('listen error', err);
        messagesContainer.innerHTML = '<p class="text-center text-red-400">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ</p>';
      });
    }

    onAuthStateChanged(auth, async (user) => {
      try {
        if (!user) await signInAnonymously(auth);
        currentUserId = (user || auth.currentUser).uid;
        listenForMessages();
      } catch (e) {
        console.error('auth error', e);
        loadingState.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ';
      }
    });

    messageForm.addEventListener('submit', (e) => {
      e.preventDefault();
      postMessage(messageInput.value, titleInput.value);
    });

    // ===== Settings =====
    const accentPicker = document.getElementById('accentPicker');
    accentPicker.addEventListener('input', (e) => {
      const c = e.target.value;
      document.querySelector(':root').style.setProperty('--accent', c);
      showToast('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡πÅ‡∏•‡πâ‡∏ß');
    });
    const purgeLocal = document.getElementById('purgeLocal');
    purgeLocal.addEventListener('click', () => {
      localStorage.clear();
      showToast('‡∏•‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß');
    });
  </script>
</body>
</html>
